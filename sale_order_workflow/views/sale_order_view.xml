<odoo>
  <data>



    <record id="sale_order_form_design" model="ir.ui.view">
        <field name="model">sale.order</field>
        <field name="name">Sale Order Desgin</field>
        <field name="inherit_id" ref="sale.view_order_form" />
        <field name="arch" type="xml">


            <xpath expr="//button[@name='action_view_invoice']" position="before">
                    <field name="production_ids" invisible="1"/>
                    <button type="object" name="action_view_productions" class="oe_stat_button" icon="fa-industry" attrs="{'invisible': [('production_count', '=', 0)]}" groups="base.group_user">
                        <field name="production_count" widget="statinfo" string="Production"/>
                    </button>
                </xpath>

            <xpath expr="/form/sheet/group" position="inside">
              <group>
                <field name="design_status" />
                <field name="quote_status" />
              </group>
              <group>
                <field name="production_status" readonly="1"/>
                <field name="picking_status" readonly="1"/>
              </group>
            </xpath>



        </field>
    </record>

    <record id="view_order_form_inherit_sale_stock_inherit" model="ir.ui.view">
                <field name="name">sale.order.form.sale.talleres</field>
                <field name="model">sale.order</field>
                <field name="inherit_id" ref="sale_stock.view_order_form_inherit_sale_stock"/>
                <field name="arch" type="xml">
                    <xpath expr="//field[@name='order_line']/tree/field[@name='route_id']" position="replace">
                        <field name="route_id" groups="sale_stock.group_route_so_lines" options="{'no_create': True}" style="width:50% !important"/>
                    </xpath>
               </field>
            </record>

    <record id="sale_order_view_search_wf_quotation" model="ir.ui.view">
            <field name="name">sale.order.search.wf.quotation</field>
            <field name="model">sale.order</field>
            <field name="mode">primary</field>
            <field name="inherit_id" ref="sale.sale_order_view_search_inherit_quotation"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='sent']" position="after">
                    <filter string="Design" name="design" domain="[('state','=','design')]"/>
                </xpath>
                <xpath expr="//filter[@name='customer']" position="after">
                  <filter name="status" string="State" domain="[]" context="{'group_by':'state'}"/>
                </xpath>
            </field>
        </record>

      <record id="view_order_tree_wf" model="ir.ui.view">
                <field name="name">sale.order.wf.tree</field>
                <field name="model">sale.order</field>
                <field name="priority">2</field>
                <field name="inherit_id" ref="sale.view_order_tree"/>
                <field name="arch" type="xml">
                    <field name="invoice_status" position="after">
                        <field name="design_status"
                          options='{"fg_color": "red:design_status in (&apos;to design&apos;);
                          orange:design_status in (&apos;in design&apos;);green:design_status in (&apos;ready&apos;);"}'/>
                        <field name="production_status"
                          options='{"fg_color": "red:production_status in (&apos;to produce&apos;);
                          orange:production_status in (&apos;in production&apos;);green:production_status in (&apos;ready&apos;);"}'/>
                        <field name="picking_status" />
                    </field>
                    <field name="invoice_status" position="before">
                        <field name="quote_status"
                          options='{"fg_color": "red:quote_status in (&apos;to quote&apos;);;green:quote_status in (&apos;quoted&apos;);"}'/>
                    </field>
                </field>
            </record>

        <record id="view_quotation_tree_wf" model="ir.ui.view">
                  <field name="name">sale.order.qwf.tree</field>
                  <field name="model">sale.order</field>
                  <field name="priority">2</field>
                  <field name="inherit_id" ref="sale.view_quotation_tree"/>
                  <field name="arch" type="xml">
                    <field name="state" position="after">
                          <field name="quote_status"
                            options='{"fg_color": "red:quote_status in (&apos;to quote&apos;);;green:quote_status in (&apos;quoted&apos;);"}'/>
                          <field name="invoice_status" />
                          <field name="design_status"
                            options='{"fg_color": "red:design_status in (&apos;to design&apos;);
                            orange:design_status in (&apos;in design&apos;);green:design_status in (&apos;ready&apos;);"}'/>
                          <field name="production_status"
                            options='{"fg_color": "red:production_status in (&apos;to produce&apos;);
                            orange:production_status in (&apos;in production&apos;);green:production_status in (&apos;ready&apos;);"}'/>
                          <field name="picking_status" />
                      </field>
                  </field>
              </record>

            <record id="mrp_production_sale_action" model="ir.actions.act_window">
                  <field name="name">Manufacturing Orders</field>
                  <field name="type">ir.actions.act_window</field>
                  <field name="res_model">mrp.production</field>
                  <field name="view_type">form</field>
                  <field name="view_mode">tree,form</field>
                  <field name="view_id" eval="False"/>
                  <field name="context">{'search_default_todo': True}</field>

              </record>

              <record id="view_sales_order_filter_wf" model="ir.ui.view">
                    <field name="name">sale.order.list.wf</field>
                    <field name="model">sale.order</field>
                    <field name="inherit_id" ref="sale.view_sales_order_filter"/>
                    <field name="arch" type="xml">
                      <filter name="activities_my" position="after">
                        <filter string="With Design" name="design_tasks"
                            domain="[('design_status', '!=', 'no')]"/>
                        <filter string="With Production" name="production_tasks"

                            domain="[('production_status', '!=', 'no')]"/>
                      </filter>
                      <filter name="customer" position="after">
                        <filter name="design_status" string="Design" domain="[]" context="{'group_by':'design_status'}"/>
                        <filter name="production_status" string="Production" domain="[]" context="{'group_by':'production_status'}"/>
                        <filter name="picking_status" string="Picking" domain="[]" context="{'group_by':'picking_status'}"/>
                      </filter>

                    </field>
                </record>

          <record id="view_order_tree_date_hide" model="ir.ui.view">
              <field name="model">sale.order</field>
              <field name="inherit_id" ref="sale_order_dates.view_order_tree_date"/>
              <field name="arch" type="xml">
                  <field name="requested_date" position="attributes">
                    <attribute name="invisible">True</attribute>
                  </field>
                  <field name="commitment_date" position="attributes">
                    <attribute name="invisible">True</attribute>
                  </field>
              </field>
          </record>

          <!-- Add requested_date and commitment_date on quotation view -->
          <record id="view_quotation_tree_date_hide" model="ir.ui.view">
              <field name="model">sale.order</field>
              <field name="inherit_id" ref="sale_order_dates.view_quotation_tree_date"/>
              <field name="arch" type="xml">
                <field name="requested_date" position="attributes">
                  <attribute name="invisible">True</attribute>
                </field>
                <field name="commitment_date" position="attributes">
                  <attribute name="invisible">True</attribute>
                </field>
              </field>
          </record>

  </data>
</odoo>
